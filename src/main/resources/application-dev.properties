# ==========================================
#  Environment & Base App Settings
# ==========================================
environment.name=DEV
webApp.url=https://web.rradev.taiwanmobile.com
server.port=8443
server.ssl.enabled=true
server.ssl.key-store=classpath:ssl/DevAP2KeyStore.jks
server.ssl.key-store-type=PKCS12
server.ssl.key-store-password=rramgmt
server.ssl.key-alias=entitle
server.servlet.context-path=
server.servlet.application-display-name=RRA-mgmt

# Base URL config
server.forward-headers-strategy=native
spring.web.resources.static-locations=classpath:/static/
spring.mvc.static-path-pattern=/**
server.servlet.session.tracking-modes=cookie
server.servlet.session.timeout=120m

# ==========================================
#  Spring & Template Engine
# ==========================================
spring.main.allow-circular-references=true

# Thymeleaf
spring.thymeleaf.enabled=true
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.cache=false

# Freemarker off
spring.freemarker.enabled=false
spring.mvc.view.prefix=/templates/
spring.mvc.view.suffix=.html

# ==========================================
#  Database Configuration (PostgreSQL)
# ==========================================
spring.datasource.url=jdbc:postgresql://localhost:5432/postgres
spring.datasource.username=rra
spring.datasource.password=ENC(e4rPNgsMhlrmf2IBN/pow8LwxX9iNWIb)
spring.datasource.driver-class-name=org.postgresql.Driver


#  Database Configuration (PostgreSQL) VDI
# spring.datasource.url=jdbc:postgresql://172.30.6.126:5432/rra
# spring.datasource.username=rra
# spring.datasource.password=ENC(e4rPNgsMhlrmf2IBN/pow8LwxX9iNWIb)
# spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool (Hikari)
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=3
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=1800000

# JPA & Hibernate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=none
spring.transaction.rollback-on-commit-failure=true

# ==========================================
#  MongoDB Configuration
# ==========================================
# Added MongoDB configuration
spring.data.mongodb.host=localhost
spring.data.mongodb.port=27017
spring.data.mongodb.database=mongodb
spring.data.mongodb.username=mongo
spring.data.mongodb.password=ENC(e4rPNgsMhlrmf2IBN/pow8LwxX9iNWIb)

# ==========================================
#  Logging Configuration - ERRORS AND SQL ONLY
# ==========================================
logging.config=classpath:logback-spring.xml

# Set root logging level to ERROR (only shows errors)
logging.level.root=ERROR

# SQL logs - Keep SQL visible
logging.level.org.hibernate.SQL=DEBUG

# Show SQL in logs but hide other hibernate logs
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# Disable verbose Hibernate statistics
spring.jpa.properties.hibernate.generate_statistics=false

# Only log slow queries for performance troubleshooting
spring.jpa.properties.hibernate.session.events.log.LOG_QUERIES_SLOWER_THAN_MS=300
logging.level.org.hibernate.SQL_SLOW=WARN

# Disable other debug loggers
logging.level.org.hibernate.type=ERROR
logging.level.org.springframework.jdbc=ERROR
logging.level.org.springframework.orm=ERROR
logging.level.org.springframework.transaction=ERROR
logging.level.com.zaxxer.hikari=ERROR

# Retain error logs for security components
logging.level.org.springframework.security=ERROR

# Added logging for Jasypt to debug encryption issues
logging.level.org.jasypt=DEBUG

# Favicon off
spring.mvc.favicon.enabled=false

# Tomcat access log
server.tomcat.basedir=./
server.tomcat.accesslog.enabled=true
server.tomcat.accesslog.buffered=false
server.tomcat.accesslog.suffix=.log
server.tomcat.accesslog.pattern=%t,%A,%p,%a,%U,%m,%q,%b,%s,%H,%D,%{User-Agent}i,%{X-Forwarded-For}i
server.tomcat.accesslog.prefix=access_log
server.tomcat.accesslog.file-date-format=.yyyy-MM-dd

# ==========================================
#  Mail Config
# ==========================================
spring.mail.host=172.16.21.2
rra.mail.from=rra@taiwanmobile.com

# ==========================================
#  NTSSO
# ==========================================
nt.sso.url=https://ssouat.taiwanmobile.com/SSOUAT/SSOAPI.aspx
nt.sso.sid=200348
nt.sso.auth.type=Form

# ==========================================
#  File Upload Config
# ==========================================
spring.servlet.multipart.maxFileSize=-1
spring.servlet.multipart.maxRequestSize=-1

# ==========================================
#  Encryption Key/IV Config
# ==========================================
ap.account.secrect.key=oJ9YTPTOEmDK1vhbXPEFRffeIRVhPi4a
ap.account.secrect.iv=u2L0KebuHPcjSKeg
rc.recieve.secrect.key=9bJHnMNKU5WS7OV5II9JXgUIAGhUZ0Ao
rc.recieve.secrect.iv=9NkKmHvnTKw7ywC9

# ==========================================
#  External API
# ==========================================
EPAPI.master=https://terpweb.taiwanmobile.com/ws_ep/j/getMobiPoInfo
EPAPI.sms=http://172.30.4.112:8080/setMomoidChangeSms
EPAPI.userId=U0003
EPAPI.userPwd=1562533

# ==========================================
#  MoGW
# ==========================================
MOGW.DomainName=https://mogwdev.taiwanmobile.com

# ==========================================
#  Cron Jobs
# ==========================================
cron.alertFor90dayLogin=0 30 00 * * ?

# ==========================================
#  Report Output Path
# ==========================================
report.path=/home/tpsacct/checkbillList/

# ==========================================
#  Jasypt (Encryption)
# ==========================================
jasypt.encryptor.algorithm=PBEWithMD5AndDES
jasypt.encryptor.iv-generator-classname=org.jasypt.iv.NoIvGenerator
jasypt.encryptor.password=${JASYPT_ENCRYPTOR_PASSWORD:QZy55xlBt8cciNuGierrXw==}
